Scripted values are simple or complex values that can be referenced in almost any script that accepts numbers (and in some cases, booleans).

They mainly come in two variants: simple static values and formulas.

== Static Values ==
Static values are defined as follows:
name_of_scripted_value = value (e.g., "minor_stress_gain = 10")

They are referenced in scripts by name:
add_stress = minor_stress_gain

== Formulas ==
For more complex values, mathematical formulas can be defined. These allow you to use everything available in the current scope.
Be careful when using these formulas, as they must be recalculated every time they are evaluated. Complex formulas can consume a lot of performance.
Formulas are not applicable to booleans.

Formulas are declared using curly braces, following this format:

name_of_scripted_value = {
    # Mathematical operations
    add = number/scripted value/scope.something
    subtract = ...
    multiply = ...
    divide = ... # Be careful not to divide by 0
    modulo = ...
    
    value = ... # Set the value to this number
    
    max = ... # If the current value is higher, set the value to this number. For example, "max = 10" will turn the number 15 into 10
    min = ... # If the current value is lower, set the value to this number
    
    round = yes # Round to the nearest integer
    ceiling = yes # Round up (towards positive infinity)
    floor = yes # Round down (towards negative infinity)
    
    if = { # If the limit condition is met, perform these operations. You can also nest "if" inside "if"
        limit = { some conditions }
        add = 5
        divide = ...
        ...
    }
    else_if = { # If the above "if" is not met, as long as the limit condition is met, these operations will be performed. You can use multiple "else_if" consecutively
        limit = { some conditions }
        operations...
    }
    else = { # If the above "if" or "else_if" are not met, perform these operations
        operations...
    }
    
    fixed_range = { # Generate a random fixed-point number within the range (e.g., 1.242)
        min = ... script value
        max = ...
    }
    
    integer_range = { # Generate a random integer within the range (e.g., 1)
        min = ...
        max = ...
    }
}

=== Execution Order ===
Operations are executed in the order defined.
Example:
value = {
    add = 5
    multiply = 4
    max = 10
    add = 5
}
The result will be "15", because "max = 10" will be applied before the last "add = 5"

=== Inlining ===
Formulas can be written inline wherever a scripted value is available. Therefore, if a formula only needs to be used once, there is no need to name it and place it in the scriptvalues folder.

Example:
add_gold = {
    value = gold
    multiply = { # Yes, you can even inline them within mathematical operators
        value = 1
        multiply = 0.5
    }
}

=== Chained References ===
You can use scope chained references to named scripted formulas. For example, if you define this formula:
    example_age = {
        value = age
    }
Then the following code will be valid:
add_gold = {
    value = mother.example_age
}

== Ranges ==
Scripted values can also define ranges.
For example, add_gold = { 1 5 } will add between 1 and 5 gold.
add_gold = { named_value another_named_value } will resolve named values (including formulas).
Please note that you cannot inline formulas within ranges. For example, you cannot do this: add_gold = { { value = 1 add = 2 } some_named_value }. If you need this functionality, please use integer_range or fixed_range in the scripted math system.

== Lists ==
Scripted values support lists.
For example, add_gold = { every_child = { add = 1 } } will add gold according to the number of children you have.
All lists should be valid, including those defined in scripts.

Ordered lists are also valid. For example:
add_gold = {
    ordered_child = {
        order_by = age
        max = 3
        add = age
    }
}

== Scopes ==
You can change scopes in scripted values just like in regular scripts.
Example:
add_gold = {
    father = {
        any_child = { add = 1 }
    }
}
This will add gold according to the number of children your father has.
